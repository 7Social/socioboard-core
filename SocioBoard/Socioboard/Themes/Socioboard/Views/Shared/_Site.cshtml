@{
    string path = @System.Configuration.ConfigurationManager.AppSettings["domain"];
}

<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Chanchal Santra">
    <link rel="shortcut icon" href="/Themes/@path/Contents/img/ivon.ico" type="image/x-icon">

    <title>SocioBoard | Home</title>

    <!-- Bootstrap Core CSS -->
    <link href="/Themes/@path/Contents/css/bootstrap.min.css" rel="stylesheet">

    <!-- MetisMenu CSS -->
    @*<link href="/Themes/@path/Contents/css/plugins/metisMenu/metisMenu.min.css" rel="stylesheet">*@

    <!-- Timeline CSS -->
    <link href="/Themes/@path/Contents/css/plugins/timeline.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="/Themes/@path/Contents/css/sb-admin-2.css" rel="stylesheet">

    <!-- Morris Charts CSS -->
    @* <link href="/Themes/@path/Contents/css/plugins/morris.css" rel="stylesheet">*@

    <!-- Custom Fonts -->
    <link href="/Themes/@path/Contents/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!--datepicker css-->
    <link href="/Themes/Socioboard/Contents/css/datepicker.css" rel="stylesheet" />
    <link href="/Themes/Socioboard/Contents/css/datepicker3.css" rel="stylesheet" />


    <link href="/Themes/Socioboard/Contents/css/bootstrap-timepicker.min.css" rel="stylesheet" />

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script src="/Themes/@path/Contents/js/jquery-1.9.1.min.js"></script>
    <script src="/Themes/@path/Contents/js/Home.js" type="text/javascript"></script>
    <script src="/Themes/@path/Contents/js/alertify.min.js" type="text/javascript"></script>
    <link href="/Themes/@path/Contents/css/alertify.core.css" rel="stylesheet" type="text/css" />
    <link href="/Themes/@path/Contents/css/alertify.default.css" rel="stylesheet" type="text/css" id="toggleCSS" />
    <link href="/Themes/@path/Contents/css/plugins/dataTables.bootstrap.css" rel="stylesheet" type="text/css"/>
</head>

<body>

    <div id="wrapper">

        <!-- Navigation -->
        <nav class="navbar navbar-default navbar-fixed-top" role="navigation" style="margin-bottom: 0">
            <div class="btn-group pull-right btn" id="groupsselection">
                @Html.Partial("_LoadGroupPartial")
            </div>

            <div class="pull-right"><a href="../Index/Pricing">Get Premium Account<i class="fa fa-fw"></i></a></div>

            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="../Home/Index">
                    <img src="/Themes/@path/Contents/img/logo.png" alt="Socio Board" style="
    margin-top: -14px;" /></a>
            </div>
            <!-- /.navbar-header -->

            <ul class="nav navbar-top-links navbar-right">
                <li class="dropdown">
                    <a title="Home" class="active" href="../Home/Index"><i class="fa fa-home fa-2x"></i></a>
                </li>
                <li class="dropdown">
                    <a title="Search Contact" data-toggle="modal" data-target="#SearchModal" style="margin-top: 10px;"><i class="fa fa-search fa-2x"></i></a>
                </li>
                <li class="dropdown">
                    <a title="Compose Message" data-toggle="modal" data-target="#myModal" style="margin-top: 10px;"><i class="fa fa-send-o fa-2x"></i></a>
                </li>
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-user fa-2x"></i><i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-user">
                        <li><a href="../UserGroup/Index"><i class="fa fa-user fa-2x"></i>User and Group<i class="fa arrow"></i></a>
                        </li>
                        <li><a href="../PersonalSetting/Index"><i class="fa fa-gear fa-2x"></i>Settings</a>
                        </li>
                        <li class="divider"></li>
                        <li><a href="../Index/Index"><i class="fa fa-sign-out fa-2x"></i>Logout</a>
                        </li>
                    </ul>
                    <!-- /.dropdown-user -->
                </li>
                <!-- /.dropdown -->
            </ul>
            <!-- /.navbar-top-links -->



            <div class="navbar-default sidebar" role="navigation">
                <div class="sidebar-nav navbar-collapse">
                    <ul class="nav" id="side-menu">
                        <li id="dashboard">
                            <a class="active" href="../Home/Index"><i class="fa fa-dashboard fa-2x"></i><span class="tweaked-margin">Dashboard</span></a>
                        </li>
                        <li id="message">
                            <a href="../Messages/Index"><i class="fa fa-envelope fa-2x"></i><span class="tweaked-margin">Messages</span><span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level">
                                <li>
                                    <a href="../Messages/Index">Smart Inbox</a>
                                </li>
                                <li>
                                    <a href="../Messages/Task">My Task</a>
                                </li>
                                <li>
                                    <a href="../Messages/sentmsg">Sent Messages</a>
                                </li>
                                <li>
                                    <a href="../Messages/Archive">Archived Messages</a>
                                </li>
                            </ul>
                            <!-- /.nav-second-level -->
                        </li>
                        <li id="feeds">
                            <a href="../Feeds/Index"><i class="fa fa-link fa-2x"></i><span class="tweaked-margin">Feeds</span><i class="fa arrow"></i></a>

                        </li>

                        <li id="publishing">
                            <a href="../Publishing/Index"><i class="fa fa-wrench fa-2x"></i><span class="tweaked-margin">Publishing</span><span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level">
                                <li id="scheduledmsg">
                                    <a href="../Publishing/Index">Schedule Messages</a>
                                </li>
                                <li id="socioqueue">
                                    <a href="../Publishing/Socioqueue">Socio Queue</a>
                                </li>
                                <li id="draft">
                                    <a href="../Publishing/Draft">Drafts</a>
                                </li>
                            </ul>
                            <!-- /.nav-second-level -->
                        </li>
                        <li id="discovery">
                            <a href="../Discovery/Index"><i class="fa fa-edit fa-2x"></i><span class="tweaked-margin">Discovery</span></a>
                        </li>
                        <li id="reports">
                            <a href="../Report/Index"><i class="fa fa-sitemap fa-2x"></i><span class="tweaked-margin">Reports</span><span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level">
                                <li>
                                    <a href="../Reports/LoadGroupReport">Group Report</a>
                                </li>
                                <li>
                                    <a href="#">Twitter Report</a>
                                </li>
                                <li>
                                    <a href="#">Team Report</a>
                                </li>

                            </ul>
                            <!-- /.nav-second-level -->
                        </li>
                        <li id="group">
                            <a href="../Group/Index"><i class="fa fa-users fa-2x"></i><span class="tweaked-margin">Groups</span></a>

                            <!-- /.nav-second-level -->
                        </li>
                    </ul>
                </div>
                <!-- /.sidebar-collapse -->
            </div>
            <!-- /.navbar-static-side -->
        </nav>

        <!-- Modal -->
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="myModalLabel">New Message</h4>
                    </div>
                    <div class="modal-body col-md-12">
                        <div class="col-md-3">
                            @*  <img src="https://fbcdn-sphotos-b-a.akamaihd.net/hphotos-ak-xap1/t31.0-8/s960x960/1523017_786750101350785_664146563_o.jpg" alt="" class="img-circle" style="height: 80px; width: 80px;">
                            <hr class="small">*@
                            <!-- Split button -->
                            <div class="btn-group">
                                <button type="button" class="btn btn-warning">Profile</button>
                                <button type="button" class="btn btn-warning dropdown-toggle" data-toggle="dropdown">
                                    <span class="caret"></span>
                                    <span class="sr-only">Toggle Dropdown</span>
                                </button>
                                <ul class="dropdown-menu" role="menu" id="binduserinul">
                                    <li><a href="#">fb</a></li>
                                    <li><a href="#">tweeter</a></li>
                                    <li><a href="#">gplus</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-md-9">
                            <div class="input-group col-md-12">
                                <textarea id="textareavaluetosendmessage" class="form-control" rows="3"></textarea>
                            </div>


                            <div class="form-group">
                                <br />
                                <input type="file" accept="image/*" name="" id="fileuploadImage">
                                @* <input type="file" id="exampleInputFile">
                                <p class="help-block">Interval Time:</p>
                                <select class="form-control">
                                    <option>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>
                                </select>*@
                            </div>
                            <button class="btn btn-default" id="btn_dropbox">Dropbox</button>
                        </div>
                        <div id="binduserprofiles">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button id="sendMessageBtn" type="button" class="btn btn-primary">Send</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <div style="height: auto; display: none; padding: 10px; border: medium ridge; margin-top: 10px;" class="dropbox_file col-md-12"></div>
                    </div>

                </div>
            </div>
        </div>
        <!--end of model-->


        <!-- Modal SearchModal-->
        <div class="modal fade" id="SearchModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="myModalLabel">Contact Search</h4>
                    </div>
                    <div class="modal-body">
                        <div class="input-group custom-search-form">
                            <input id="txtsearchcontact" type="text" class="form-control" placeholder="Search...">
                            <span class="input-group-btn">
                                <button id="btncontactsearch" class="btn btn-default" type="button">
                                    <i class="fa fa-search"></i>
                                </button>
                            </span>
                        </div>
                        <div class="chat-panel panel panel-default">
                            <div class="panel-heading">
                                <i class="fa fa-search fa-fw"></i>
                                Search Result
                            </div>
                            <!-- /.panel-heading -->
                            <div class="panel-body">
                                @* <button type="button" class="btn btn-primary btn-md btn-block"><i class="fa fa-facebook-square fa-2x fa-fw"></i><strong>Chanchal Santra</strong><i class="fa fa-clock-o fa-fw"></i></button>
                            <button type="button" class="btn btn-default btn-md btn-block"><i class="fa fa-linkedin-square fa-fw"></i>Chanchal Santra<i class="fa fa-clock-o fa-fw pull-right"></i></button>*@
                                <div class="well well-sm blue"><i class="fa fa-twitter"></i><b>twitter</b></div>
                                <div id="twittersearch">
                                </div>
                                <div class="well well-sm blue"><i class="fa fa-facebook-square fa-fw"></i><b>facebook</b></div>
                                <div id="facebooksearch">
                                </div>
                            </div>
                            <!-- /.panel-body -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--end of model-->


        @RenderBody();
        <!-- /#page-wrapper -->

    </div>
    <!-- /#wrapper -->

    <!-- jQuery Version 1.11.0 -->
    <script src="/Themes/@path/Contents/js/jquery-1.11.0.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/Themes/@path/Contents/js/bootstrap.min.js"></script>

    <!-- Metis Menu Plugin JavaScript -->
    <script src="/Themes/@path/Contents/js/plugins/metisMenu/metisMenu.js"></script>

    <!-- Morris Charts JavaScript -->
    <script src="/Themes/@path/Contents/js/plugins/morris/raphael.min.js"></script>
    <script src="/Themes/@path/Contents/js/plugins/morris/morris.min.js"></script>
    @*<script src="/Themes/@path/Contents/js/plugins/morris/morris-data.js"></script>*@
    <script src="https://raw.githubusercontent.com/dinbror/bpopup/master/jquery.bpopup.min.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="/Themes/@path/Contents/js/sb-admin-2.js"></script>

    <script src="/Themes/Socioboard/Contents/js/bootstrap-datepicker.js"></script>
    <!-- DataTables JavaScript -->
    <script src="/Themes/Socioboard/Contents/js/jquery.dataTables.js"></script>
    <script src="/Themes/Socioboard/Contents/js/dataTables.bootstrap.js"></script>


    <script src="/Themes/Socioboard/Contents/js/bootstrap-timepicker.min.js"></script>
    <script src="~/Themes/@path/Contents/js/googleanalytics.js" type="text/javascript"></script>



    <script type="text/javascript">

        var arrbindusermaster = [];
        var re_url = '';
        function bindcomposemessagemaster() {
            $.ajax({
                type: 'POST',
                url: '../Home/ComposeMessage',
                success: function (msg) {
                    //alert(msg);
                    $('#binduserinul').html(msg);
                },
                async: false
            });


        };

        function checkisuserexistmaster(profileidwithnetwork) {
            if (jQuery.inArray(profileidwithnetwork, arrbindusermaster) === -1) {
                return false;
            }
            else {
                return true;
            }
        }

        function removebindfrofilesmaster(profileid, network) {
            $('#' + profileid).hide(250, function () {
                $('#' + profileid).remove();
            });
            var i = arrbindusermaster.indexOf(profileid + "~" + network);
            if (i != -1) {
                arrbindusermaster.splice(i, 1);
            }
            //arrbindusermaster.pop(profileid + "~" + network);
            //alert(profileid + "~" + network);
        }

        function bindfrofilesmaster(network, name, profileid) {
            if (checkisuserexistmaster(profileid + "~" + network) == false) {
                arrbindusermaster.push(profileid + "~" + network);
                //alert(profileid + "~" + network);
                $('#binduserprofiles').append('<span style="display:none" class="pull-right btn btn-default bindprof" onclick="removebindfrofilesmaster(\'' + profileid + '\',\'' + network + '\')" id=' + profileid + ' data-toggle="tooltip" data-placement="right" title="click to remove"><i class="fa fa-' + network + ' fa-fw"></i>' + name + '</span>');
                $('#' + profileid).fadeIn(250);
            }
            else {
                alertify.set({ delay: 1000 });
                alertify.error('This Account Already Added')
            }

        };

        function removesearch(id) {
            $('#' + id).hide(750, function () {
                $('#' + id).remove();
            });
        }




        $(document).ready(function () {
            // alert('sitemaster');
            $('.close').click(function () {
                $('#txtsearchcontact').val('');
                $('#twittersearch').html('');
                $('#facebooksearch').html('');


            });


            bindcomposemessagemaster();
            $('.groupclk').click(function () {
                var groupid = $(this).attr('grpid');
                //alert(grpid);
                $('#groupsselection').removeClass('open');
                // return false;
                //var groupid = $("#groupsselection").val();
                $.ajax
           ({
               type: "POST",
               url: "../Home/ChangeGroup?groupid=" + groupid,
               data: '',
               contentType: "application/json; charset=utf-8",
               dataType: "html",
               success: function (msg) {
                   //debugger;
                   //alert(msg);
                   //window.location = self.location;
                   location.reload(true);
               }
           });
            });
            function searchconcact(txtsearch) {
                $.ajax({
                    type: 'POST',
                    url: '../Home/ContactSearchFacebook?keyword=' + txtsearch,
                    success: function (msg) {
                        //alert(msg);
                        $('#facebooksearch').html(msg);
                    }
                });
                $.ajax({
                    type: 'POST',
                    url: '../Home/ContactSearchTwitter?keyword=' + txtsearch,
                    success: function (msg) {
                        //alert(msg);
                        $('#twittersearch').html(msg);
                    }
                });
            }

            $('#btncontactsearch').click(function () {
                searchconcact($('#txtsearchcontact').val());
            });



            $('#sendMessageBtn').click(function () {
                var allprofiles = '';
                var curdate = new Date();
                var curdaatetimetime = (curdate.getMonth() + 1) + "/" + curdate.getDate() + "/" + curdate.getFullYear() + " " + curdate.getHours() + ":" + curdate.getMinutes() + ":" + curdate.getSeconds();
                var fileExtension = ['jpeg', 'jpg', 'png', 'gif', 'bmp'];
                var fd = new FormData();
                var filesimage = document.getElementById('fileuploadImage').files[0];
                if (filesimage != null) {
                    if (hasExtension('fileuploadImage', fileExtension)) {
                        fd.append('file', filesimage);
                    }
                    else {
                        alertify.set({ delay: 3000 });
                        alertify.error("File Extention is not current. Please upload any image file");
                        return;
                    }
                }
                if (arrbindusermaster.length < 1) {
                    alertify.set({ delay: 3000 });
                    alertify.error("Please Select atleast a Profile");
                    return;
                }
                var message = $("#textareavaluetosendmessage").val().trim();
                for (var i = 0; i < arrbindusermaster.length; i++) {
                    allprofiles += arrbindusermaster[i] + "<:>";
                    //alert(arrbindusermaster[i]);
                }


                // Get File path thru added by Dropbox
                try {
                    debugger;
                    var selected = [];
                    $('.dropbox_file input:checked').each(function () {
                        var src1 = $(this).parent().next().attr('src');
                        selected.push(src1);
                    });
                    if (selected != null && selected != 'undefined') {
                        fd.append('DropboxImg', selected.join(','));
                    }

                }
                catch (e) {

                }


                allprofiles = allprofiles.substr(0, allprofiles.length - 3);
                $('#myModal').modal('hide');
                $.ajax({
                    type: 'POST',
                    url: '../Home/ComposeMessageSend?message=' + encodeURIComponent(message) + '&allprofiles=' + allprofiles + '&curdaatetimetime=' + curdaatetimetime,
                    data: fd,
                    processData: false,
                    contentType: false,
                    success: function (data) {
                        alertify.set({ delay: 3000 });
                        alertify.success("Message Send Successfully");
                    }

                });


            });

            $("#btn_dropbox").click(function () {
                debugger;
                DropBoxData();
            });

        });

        function facebookpopup() {
            $('#facebookpopup').modal('show');
        }

        function ytvideo(check) {
            $("#popupimagesyt").attr('src', 'https://www.socioboard.com');
            var arr = check.split('/');

            var videolink = arr[arr.length - 2];
            if (videolink == "img") {
                alert('opps video not found');
            }
            else {
                $("#popupimagesyt").attr('src', 'https://www.youtube.com/embed/' + videolink);
                $('#profileModal').modal('show');

                //$("#youtubeImagePopup").bPopup({
                //    positionStyle: 'fixed'
                //});
            }
        };

        function getfacebookpage() {
            $.ajax({
                type: 'POST',
                url: '../FacebookManager/AuthenticateFacebook?op=page',
                success: function (msg) {
                    window.location = msg;
                },
                async: false
            });
        }

        function getfacebookgroup() {
            $.ajax({
                type: 'POST',
                url: '../FacebookManager/AuthenticateFacebook?op=fbgroup',
                success: function (msg) {
                    window.location = msg;
                },
                async: false
            });
        }

        function DropBoxData() {
            $.ajax
                ({
                    type: "GET",
                    url: "../DropboxManager/DropBox",
                    contentType: "application/json; charset=utf-8",
                    dataType: "html",
                    success: function (msg) {
                        debugger
                        if (msg.indexOf('authorize') > 0) {
                            if (re_url != '') {
                                DropBoxData();
                            }
                            else {
                                re_url = msg;
                                var wnd = window.open(msg, "myWindowName", "width=500, height=600");
                                debugger;

                                var timepool = window.setInterval(function () {
                                    if (wnd.closed) {
                                        window.clearInterval(timepool);
                                        DropBoxData();
                                    } else {
                                        //alert("just refreshed");
                                    }
                                }, 500);

                            }
                        }
                        else {
                            $(".dropbox_file").html('');
                            $(".dropbox_file").css('display', 'block');
                            $(".dropbox_file").html(msg);
                        }
                    },
                    error: function (err) {
                        debugger;
                        alert(err);
                    }
                });

        }






    </script>
</body>
<!-- ProfileModal -->
<div class="modal fade" id="profileModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">Profile Summary</h4>
            </div>
            <div class="modal-body">
                <div class="embed-responsive embed-responsive-4by3">
                    <iframe id="popupimagesyt" class="embed-responsive-item" src="…"></iframe>
                </div>

            </div>

        </div>
    </div>
</div>


<div class="modal fade" id="facebookpopup" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button data-dismiss="modal" class="close" type="button"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
                <h4 id="myModalLabel" class="modal-title">Add Account</h4>
            </div>
            <div class="modal-body col-md-12">

                <a style="cursor: pointer" href="../FacebookManager/AuthenticateFacebook">
                    <i class="fa fa-facebook-square fa-2x fa-fw"></i>Facebook account</a>

                <br />
                <br />
                <a style="cursor: pointer" onclick="getfacebookpage()">
                    <i class="fa fa-facebook-square fa-2x fa-fw"></i>Facebook FanPage</a>
                <br />
                <br />

                <a style="cursor: pointer" onclick="getfacebookgroup()">
                    <i class="fa fa-facebook-square fa-2x fa-fw"></i>Facebook Group</a>
                <br />

                <div class="panel-body">
                    <div id="facebookpageinfo" style="height: 200px; overflow: auto; border: 5px inset grey; padding: 3px; display: none">
                        <div id="fbpagebind" style="margin-top: 11px">
                        </div>
                    </div>
                </div>

            </div>


            <div class="modal-footer">
                <button data-dismiss="modal" class="btn btn-default" type="button">Close</button>
            </div>
        </div>


    </div>
</div>



<!--end of ProfileModel-->
</html>
